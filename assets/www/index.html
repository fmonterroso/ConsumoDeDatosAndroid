<!DOCTYPE HTML> 
 <html>
   <head>
     	<title>Consumo de Datos</title>
     	<script type="text/javascript" charset="utf-8" src="js/cordova-2.5.0.js"></script>
		<meta charset="utf-8">
	    
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <link rel="stylesheet"  href="css/jquery.mobile-1.3.1.css">
	    <link rel="stylesheet" type="text/css" href="css/tolito-1.0.4.css" />
	    <link rel="stylesheet"  href="css/main.css">
	    <link rel="stylesheet" type="text/css" href="css/jquery.confirm.css" />

	    <script src="js/jquery.js"></script>
	    <script src="js/jquery.mobile-1.3.1.js"></script>
	    <script src="js/PluginCom.js"></script>
	    <script src="js/md5.js"></script>
	    <script type="text/javascript" src="js/tolito-1.0.4.js"></script>
	    <script type='text/javascript' src='js/jsapi.js'></script>
	    <script src="js/jquery.confirm.js"></script>
	    <script src="js/funciones.js"></script>


	    <script>
			// Wait for Cordova to load
		    document.addEventListener("deviceready", onDeviceReady, false);

		    //variables de control (banderas)
		    var currentId="";
		    var bandera_eliminar="0";
		    var bandera_paquete="0";
		    var bandera_existen_numeros="0";
			
			//Valores por defecto de variables
		    var vigencia = "";
		    var mbtotales = "0";
		    var mbconsumidos = "0";
		    var nombrepaq = "N/A";
		    var numtelefonico = "";
		    var cont_paquetes = 0;

		    var nombre_usuario = "";

		    function drawChart() {}
		    try
			  {
				google.load('visualization', '1.0', {'packages':['gauge']});
				google.setOnLoadCallback(drawChart);
			  }
			catch(err)
			  {
			  	//alert("Error al cargar los graficos"+err);
			  	console.log("No se pudo cargar la librería para graficos.");
			  }
		    

			$( document ).on( "pageshow", function(){
				//$("#ConsumodeDatos").hide().delay( 1500 ).show( "fast" );
				//$("#DEMO").hide().delay( 1500 ).show( "fast" );

				
			});

			function onDeviceReady() {
			    // Now safe to use the Cordova API
			    
			    //Agregando controlador del boton ATRAS
			    document.addEventListener("backbutton", handleBackButton, true);

			    //Abriendo Base de datos
			    var db = abrirBD();
			    
			    
			    //Cargando librerias para el grafico de Gauge
			    if(navigator.connection.type == Connection.NONE){
			        // No tenemos conexión			        
			        console.log("No tenemos conexión");
			    }else{
			        // Si tenemos conexión
			        console.log("Si tenemos conexión");
			    }


			    //Recorrer datos y mostrar
    			consultaInicial();
    			
    			//Consulta buscando el numero principal si no fue establecido al inicio    			
    			if (currentId == ""){
    				//no se inserto un numero al inicio
    				//realizando busqueda del principal
    				consultaPrincipal();    				
    			}else{
    				consultaDatosPaquete();
    			}
    			
			}

			
			// Aqui se carga la funcion cuando se carga completament el arbol DOm de nuestra pagina index.html
			$(document).ready(function(){

				

			});//fin de document ready
			
		</script>

   </head>
   <body>
    	
    	<div id="Datos" data-url="Datos" data-role="page">
			<div data-role="header" data-position="fixed">
				<div data-role="navbar">
				    <ul>
					    <li><a class="menuitemMenu" href="#" data-icon="grid" data-role="button" data-iconpos="notext"></a></li>
					    <li><a class="menuitemHome" href="#" data-icon="home" data-role="button" data-iconpos="notext"></a></li>
					    <li><a class="menuitemStore" href="#" data-icon="star" data-role="button" data-iconpos="notext"></a></li>
					    <li><a class="menuitemConfig" href="#" data-icon="gear" data-role="button" data-iconpos="notext"></a></li>
				    </ul>
				</div><!-- /navbar -->

			</div><!-- /header -->			

			<div data-role="content">
				<span style="font-size: 12px;">
					<div id="user_name" style="font-size: 16px; font-weight: bold; !important;"></div>
				</span>
				<script type="text/javascript">
					//Consultando datos del usuario
    				consultarUsuarioBD();
				</script>
				<br/>
				<span style="font-size: 12px;">
					<div id="dateAndTime" style="font-size: 12px; font-weight: bold; !important;"></div>
				</span>

				<div data-role="fieldcontain">
					<div id='chart_div'></div>
					<a href="#popupBasic" data-rel="popup">
						<div id="progressbar"></div>
					</a>
 					<div data-role="popup" id="popupBasic">
					  <p>
					  	<div id="mbConsumedBar" style="font-weight: bold;"></div>
					  <p>
					</div>
				</div>
				<div data-role="fieldcontain">
					<div style="font-size: 12px; float:left;">Paquete vigente al&nbsp;</div><div id="validity" style="font-size: 12px; font-weight: bold; !important;"></div>
				</div>				

				<ul data-role="listview">
					<li data-role="list-divider"><h3></h3>
						<p>Cada vez que recibes correos, revisas tus redes sociales o navegas en internet, consumes MB**</p>
					</li>
					<li>Detalle de consumo</li>
					<li>
						<a id="goDetalleComsumo" href="#" style="font-weight: normal">
							<div id="mbConsumed" style="float:left;font-weight: bold; !important;"></div><div style="float:left;">&nbsp;MB Consumidos</div>
							<br/>
							<div id="mbAvailable" style="float:left;font-weight: bold; !important;"></div><div style="float:left;">&nbsp;MB Disponibles</div>
						</a>
					</li>

					<li>Detalles de su paquete</li>
					<li>
						<a id="goDetallePaquete" href="#" style="font-weight: normal">
							<div style="float:left; font-size: 13px;">Tu número: &nbsp;</div><div id="phoneNum" style="float:left; font-size: 13px; font-weight: bold; !important;"></div>
							<br/>
							<div style="float:left; font-size: 13px;">Tu plan: &nbsp;</div><div id="packName" style="float:left; font-size: 13px; font-weight: bold; !important;"></div>
						</a>						
					</li>
					<li>
						<div style="float:left;">Tienes &nbsp;</div>
						<div id="numPaqRemaining">&nbsp;</div>
					</li>
					<li>
						<div class="center-wrapper">
			  				<input id="btnElimiar" type="button" data-icon="delete" data-inline="true" data-theme="e" value="Eliminar"/>
						</div>
					</li>
				</ul>				
			</div>

			<div data-role="footer">
				<h1>Contáctanos</h1>
			</div>
		</div>
   </body>
 </html>